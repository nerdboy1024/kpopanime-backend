const { db, auth } = require('../config/firebase');

const blogPosts = [
    {
        title: 'Top 10 K-pop Albums to Collect in 2024',
        slug: 'top-10-kpop-albums-2024',
        excerpt: 'Discover the must-have K-pop albums for your collection this year, from BTS to NewJeans.',
        content: `# Top 10 K-pop Albums to Collect in 2024

K-pop continues to dominate the global music scene, and collecting physical albums has become more popular than ever. Here are our top picks for 2024:

## 1. BTS - Map of the Soul: 7
This album is a masterpiece that showcases BTS's artistic growth. The deluxe edition includes exclusive photocards and a beautiful photobook.

## 2. BLACKPINK - THE ALBUM
BLACKPINK's first full-length album is a collector's dream. Multiple versions mean multiple opportunities to collect different photocards and posters.

## 3. NewJeans - Get Up
The fresh new group taking the K-pop world by storm. Their albums feature innovative packaging and design.

## 4. Stray Kids - 5-STAR
Known for their powerful performances, this album captures their energy perfectly with stunning visuals.

## 5. SEVENTEEN - FML
One of the best-selling albums of the year, featuring incredible group choreography concepts in the photobook.

## Why Collect Physical Albums?

Physical K-pop albums offer so much more than just music:
- **Photocards**: Collectible cards featuring your favorite members
- **Photobooks**: High-quality photos you can't find anywhere else
- **Posters**: Beautiful artwork to decorate your space
- **Special Extras**: Stickers, postcards, and more

## Tips for Collectors

1. **Buy from official sources** to ensure authenticity
2. **Store albums properly** to maintain condition
3. **Join collector communities** to trade photocards
4. **Pre-order** to get special bonuses

Happy collecting!`,
        category: 'K-pop',
        featuredImage: 'https://images.unsplash.com/photo-1619983081563-430f63602796?w=800',
        readTime: 5,
        isPublished: true,
        tags: ['K-pop', 'Albums', 'Collecting', 'BTS', 'BLACKPINK', 'NewJeans']
    },
    {
        title: 'The Ultimate Guide to Anime Figure Collecting',
        slug: 'ultimate-guide-anime-figure-collecting',
        excerpt: 'Everything you need to know about starting and maintaining your anime figure collection.',
        content: `# The Ultimate Guide to Anime Figure Collecting

Anime figures have become increasingly popular collectibles, ranging from affordable prize figures to high-end scale figures. This guide will help you navigate the exciting world of figure collecting.

## Types of Anime Figures

### 1. Prize Figures
These are affordable figures typically won from crane games or purchased for $20-40. Great for beginners!

### 2. Scale Figures
High-quality figures that are scaled to a specific ratio (1/8, 1/7, etc.). These can range from $100-500+.

### 3. Nendoroids
Cute chibi-style figures with interchangeable parts. Perfect for collectors who love customization.

### 4. Figma
Highly poseable action figures with multiple accessories and face plates.

## Popular Series to Collect

- **One Piece**: Endless character options with new releases regularly
- **Naruto**: Classic series with figures ranging from affordable to premium
- **My Hero Academia**: Modern favorite with constantly expanding figure lines
- **Demon Slayer**: Currently trending with beautiful figure designs
- **Attack on Titan**: Dramatic poses and detailed sculpting

## Care and Maintenance

### Display Tips
- Keep figures away from direct sunlight to prevent fading
- Dust regularly with a soft brush or compressed air
- Use display cases to protect from dust and damage

### Storage
- Keep original boxes for potential resale value
- Store in cool, dry places
- Avoid basements or attics with temperature fluctuations

## Where to Buy

1. **Official retailers**: Ensure authenticity and quality
2. **Pre-orders**: Get limited editions and best prices
3. **Second-hand markets**: Find rare or discontinued figures
4. **Conventions**: Discover exclusive releases

## Avoiding Bootlegs

- Check seller reputation
- Compare with official photos
- Verify packaging quality
- Be wary of prices that seem too good to be true

## Budget Management

Figure collecting can get expensive! Here are some tips:
- Set a monthly budget
- Prioritize favorite characters or series
- Mix expensive scale figures with affordable prize figures
- Wait for sales and promotions

Start small, collect what you love, and enjoy the journey!`,
        category: 'Anime',
        featuredImage: 'https://images.unsplash.com/photo-1601814933824-fd0b574dd592?w=800',
        readTime: 8,
        isPublished: true,
        tags: ['Anime', 'Figures', 'Collecting', 'Guide', 'Nendoroid']
    },
    {
        title: 'K-pop Concert Must-Haves: Official Lightsticks Guide',
        slug: 'kpop-concert-lightsticks-guide',
        excerpt: 'Learn everything about official K-pop lightsticks and how they enhance your concert experience.',
        content: `# K-pop Concert Must-Haves: Official Lightsticks Guide

If you're attending a K-pop concert, you absolutely need an official lightstick! These aren't just light-up toysâ€”they're an essential part of the concert experience.

## What Are Lightsticks?

Official lightsticks (ì‘ì›ë´‰) are fan-made light devices unique to each K-pop group. They:
- Display the group's official colors
- Often feature the group's logo or symbol
- Connect to concerts via Bluetooth for synchronized light shows
- Represent your dedication as a fan

## Popular Lightsticks

### BTS Army Bomb
The iconic globe-shaped lightstick that lights up ARMY concerts worldwide. Version 4 includes Bluetooth connectivity for synchronized colors during performances.

**Price**: $60-75
**Features**: Bluetooth, multi-color LED, app control

### BLACKPINK Lightstick
Unique hammer-shaped design representing BLACKPINK's powerful image. The pink glow is instantly recognizable.

**Price**: $55-65
**Features**: Pink LED, hammer design

### TWICE Candy Bong
Candy-colored lightstick perfect for TWICE's bright and cheerful concept.

**Price**: $50-60
**Features**: Multiple color modes, unique candy design

### Stray Kids Nachimbong
Compass-themed lightstick that represents finding your direction with Stray Kids.

**Price**: $55-70
**Features**: Compass design, multiple lighting modes

## Why Buy Official?

### Bluetooth Connectivity
Official lightsticks connect to the concert's sound system, creating stunning synchronized light shows with thousands of other fans.

### Quality
- Better battery life
- Brighter LEDs
- Durable construction
- Official warranty

### Support Your Artists
Buying official merchandise directly supports your favorite groups.

## Concert Tips

1. **Charge before the concert** - Most last 3-4 hours on a full charge
2. **Bring spare batteries** - Usually require AAA batteries
3. **Download the app** - Enable Bluetooth features
4. **Arrive early** - Set up Bluetooth connection before the show starts
5. **Follow fan chants** - Wave your lightstick during specific moments

## Where to Buy

- **Official online stores**: Weverse Shop, YG Select, JYP Shop
- **Authorized retailers**: Ensure authenticity
- **K-pop stores**: Physical stores in major cities
- **Our shop**: We stock official lightsticks from major groups!

## Avoiding Fakes

âš ï¸ Counterfeit lightsticks are common! Check for:
- Official hologram stickers
- Proper packaging and quality
- Working Bluetooth (if advertised)
- Correct group branding

## Collection Value

Many fans collect lightsticks even if they can't attend concerts:
- Limited edition versions
- Version upgrades (like BTS versions 1-4)
- Discontinued designs
- Special collaborations

## The Concert Experience

There's nothing quite like being in an arena filled with thousands of glowing lightsticks, all changing colors in sync with the music. It's a magical experience that creates:
- A sense of community with other fans
- Unforgettable photo opportunities
- Amazing fan videos
- Memories that last forever

Whether you're attending your first K-pop concert or you're a seasoned concert-goer, an official lightstick is your ticket to the full fan experience.

**Pro tip**: Practice your fan chants at home with your lightstick to be ready for the concert!`,
        category: 'K-pop',
        featuredImage: 'https://images.unsplash.com/photo-1559827260-dc66d52bef19?w=800',
        readTime: 6,
        isPublished: true,
        tags: ['K-pop', 'Concerts', 'Lightsticks', 'Merch', 'BTS', 'BLACKPINK']
    }
];

async function seedBlog(adminUserId = null) {
    console.log('ðŸŒ± Starting blog post seeding...');

    try {
        // Get admin user ID if not provided
        let authorId = adminUserId;

        if (!authorId) {
            console.log('   Looking for admin user...');

            // Try to find an admin user
            const usersSnapshot = await db.collection('users')
                .where('role', '==', 'admin')
                .limit(1)
                .get();

            if (!usersSnapshot.empty) {
                authorId = usersSnapshot.docs[0].id;
                console.log(`   âœ“ Found admin user: ${authorId}`);
            } else {
                // Create a default system user for blog posts
                console.log('   No admin user found. Creating system author...');
                const systemUserRef = await db.collection('users').add({
                    email: 'system@kpopanimeshop.com',
                    displayName: 'K-pop Anime Shop',
                    role: 'admin',
                    createdAt: new Date(),
                    updatedAt: new Date()
                });
                authorId = systemUserRef.id;
                console.log(`   âœ“ Created system author: ${authorId}`);
            }
        }

        // Check if blog posts already exist
        const existingPosts = await db.collection('blog_posts').get();

        if (!existingPosts.empty) {
            console.log(`âš ï¸  Found ${existingPosts.size} existing blog posts.`);

            const shouldDelete = process.argv.includes('--force');
            if (shouldDelete) {
                console.log('   --force flag detected. Deleting existing blog posts...');
                const batch = db.batch();
                existingPosts.docs.forEach(doc => {
                    batch.delete(doc.ref);
                });
                await batch.commit();
                console.log('   âœ… Existing blog posts deleted.');
            } else {
                console.log('   Skipping blog post seeding. Use --force to overwrite.');
                return;
            }
        }

        // Create blog posts
        const batch = db.batch();

        for (const post of blogPosts) {
            const docRef = db.collection('blog_posts').doc();

            const now = new Date();

            batch.set(docRef, {
                ...post,
                authorId: authorId,
                publishedAt: post.isPublished ? now : null,
                createdAt: now,
                updatedAt: now,
                metadata: {}
            });

            console.log(`   âœ“ Prepared blog post: ${post.title}`);
        }

        await batch.commit();

        console.log('\nâœ… Successfully seeded blog posts!');
        console.log(`   Blog posts created: ${blogPosts.length}`);
    } catch (error) {
        console.error('âŒ Error seeding blog posts:', error);
        throw error;
    }
}

// Run if called directly
if (require.main === module) {
    seedBlog()
        .then(() => {
            console.log('\nâœ¨ Blog post seeding complete!');
            process.exit(0);
        })
        .catch((error) => {
            console.error('\nðŸ’¥ Blog post seeding failed:', error);
            process.exit(1);
        });
}

module.exports = { seedBlog };
